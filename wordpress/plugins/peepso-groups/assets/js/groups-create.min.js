!function o(n,s,r){function a(t,e){if(!s[t]){if(!n[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(p)return p(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}i=s[t]={exports:{}},n[t][0].call(i.exports,function(e){return a(n[t][1][e]||e)},i,i.exports,o,n,s,r)}return s[t].exports}for(var p="function"==typeof require&&require,e=0;e<r.length;e++)a(r[e]);return a}({1:[function(e,t,i){!function(a){!function(){"use strict";var e,r,t,i="undefined"!=typeof window?window.peepso:void 0!==a?a.peepso:null;const o=window.peepsogroupsdata&&window.peepsogroupsdata.dialogCreateTemplate,n=window.peepsogroupsdata&&+window.peepsogroupsdata.max_categories;function s(e){this.opts=e||{},this.create()}e=jQuery,r=e,peepso.npm.objectAssign(s.prototype,{template:peepsogroupsdata.dialogCreateTemplate,create:function(){this.popup=(0,i.dialog)(o,{wide:!0}).show(),this.$el=this.popup.$el,this.$submit=this.$el.find(".ps-js-submit"),this.$loading=this.$el.find(".ps-js-loading"),this.$el.on("input","[name=group_name]",r.proxy(this.onInput,this)),this.$el.on("input","[name=group_desc]",r.proxy(this.onInput,this)),this.$el.on("click","[name=category_id]",r.proxy(this.onSelectCategory,this)),this.$el.on("click",".ps-js-dropdown--privacy .ps-js-dropdown-menu a",r.proxy(this.onChangePrivacy,this)),this.$el.on("click",".ps-js-cancel",r.proxy(this.onClose,this)),this.$el.on("click",".ps-js-submit",r.proxy(this.onSubmit,this)),this.$el.appendTo(document.body)},onInput:function(e){var e=r(e.currentTarget),t=e.parent().find(".ps-js-limit"),i=+e.data("maxlength"),o=e.val();i&&o.length>i&&(o=o.substr(0,i),e.val(o)),t.html(i-o.length)},onSelectCategory:function(e){var t;"radio"!==e.target.type&&(t=(e=this.$el.find("[name=category_id]")).filter(":checked"),e=e.not(t),t.length>=n?(e.prop("disabled",!0),e.parent().css("opacity",.3)):(e.prop("disabled",!1),e.parent().css("opacity","")))},onChangePrivacy:function(e){var e=r(e.currentTarget),t=e.closest(".ps-js-dropdown").find(".ps-js-dropdown-toggle");t.find(".dropdown-value span").text(e.find(".ps-dropdown__group-title span").text()),t.find(".dropdown-value [class*=ps-icon]").attr("class",e.find(".ps-dropdown__group-title [class*=ps-icon]").attr("class")),this.$el.find("input[name=group_privacy]").val(e.data("optionValue"))},onClose:function(e){e.preventDefault(),e.stopPropagation(),this.$el.remove()},onSubmit:function(){var i,e=r.trim(this.$el.find("[name=group_name]").val()),t=r.trim(this.$el.find("[name=group_desc]").val()),o=new Array,n=this.$el.find("[name=group_privacy]").val(),s=this.$el.find("[name=_wpnonce]").val();this.$el.find("[name=category_id]:checked").each(function(){o.push(r(this).val())}),i={name:e,description:t,category_id:o,meta:{privacy:n},_wpnonce:s},this.$el.find("input, textarea, select").filter(".ps-js-custom-input").each(function(){var e=r(this),t=e.attr("name");t&&(e.is(":checkbox")?e.is(":checked")&&(i[t+"[]"]=i[t+"[]"]||[],i[t+"[]"].push(e.val())):e.is(":radio")&&!e.is(":checked")||(i[t]=e.val()))}),this.$submit.attr("disabled","disabled"),this.$loading.show(),peepso.postJson("groupajax.create",i,function(e){this.$loading.hide(),this.$submit.removeAttr("disabled"),e.success?e.data&&e.data.redirect&&(window.location=e.data.redirect):e.errors&&e.errors.length&&((e=e.errors[0]||{}).name?this.$el.find(".ps-js-error-name").html(e.name).show():this.$el.find(".ps-js-error-name").hide(),e.description?this.$el.find(".ps-js-error-desc").html(e.description).show():this.$el.find(".ps-js-error-desc").hide(),e.category_id?this.$el.find(".ps-js-error-category_id").html(e.category_id).show():this.$el.find(".ps-js-error-category_id").hide())}.bind(this))}}),t=s,peepso.groups||(peepso.groups={}),peepso.groups.dlgCreate=function(e){new t(e).popup.show()}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);