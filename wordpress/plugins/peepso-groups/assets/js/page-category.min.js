!function a(r,i,n){function d(t,e){if(!i[t]){if(!r[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(s)return s(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}o=i[t]={exports:{}},r[t][0].call(o.exports,function(e){return d(r[t][1][e]||e)},o,o.exports,a,r,i,n)}return i[t].exports}for(var s="function"==typeof require&&require,e=0;e<n.length;e++)d(n[e]);return d}({1:[function(e,t,H){!function(Y){!function(){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=function(){g||(g=(0,o.dialog)(a.group_category.template_avatar,{wide:!0,destroyOnClose:!1}).show(),w=g.$el,v=w.find(".ps-js-upload").on("click",Q),y=function(){var e=(0,s.default)('<input type="file" name="filedata" accept="image/*" data-name="group-category-avatar-upload" />').css({position:"absolute",opacity:0,height:1,width:1});e.appendTo(document.body),e.psFileupload&&e.psFileupload({formData:{category_id:i,_wpnonce:d},dataType:"json",url:c,replaceFileInput:!1,dropZone:null,add(e,t){var o=t.files[0];o.type.match(/image\/(jpe?g|png|webp)$/i)?o.size>r?M.html(p).show():(M.hide(),T("loading"),t.submit()):M.html(l).show()},done(e,t){var o,a,t=t.result;t.success?(o=t.data&&t.data.image_url,a=t.data&&t.data.orig_image_url,W=!0,T(o,a),m.removeAttr("disabled")):t.errors&&M.html(t.errors[0]).show()}});return e}(),_=w.find(".ps-js-remove").on("click",q),m=w.find(".ps-js-submit").on("click",I),j=w.find(".ps-js-btn-crop").on("click",L),x=w.find(".ps-js-btn-crop-cancel").on("click",N),b=w.find(".ps-js-btn-crop-save").on("click",X),k=w.find(".ps-js-btn-rotate-l").on("click",{dir:"ccw"},C),D=w.find(".ps-js-btn-rotate-r").on("click",{dir:"cw"},C),M=w.find(".ps-js-error").hide(),E=w.find(".ps-js-loading").hide(),A=w.find(".ps-js-has-avatar"),O=w.find(".ps-js-no-avatar"),z=w.find(".ps-js-original"),$=w.find(".ps-js-preview"),F=w.find(".ps-js-avatar-loading"),T.apply(null,u?[a.group_category.img_avatar,a.group_category.img_avatar_original]:[]),m.attr("disabled","disabled"));return g};var e,t,s=(e="undefined"!=typeof window?window.jQuery:void 0!==Y?Y.jQuery:null)&&e.__esModule?e:{default:e},o="undefined"!=typeof window?window.peepso:void 0!==Y?Y.peepso:null,a="undefined"!=typeof window?window.peepsodata:void 0!==Y?Y.peepsodata:null;const r=+peepsodata.upload_size,i=+a.group_category.id,n=a.group_category.img_avatar_default,d=a.group_category.avatar_nonce,c=peepsodata.ajaxurl_legacy+"groupcategoryajax.avatar_upload",l=a.group_category.text_error_filetype,p=a.group_category.text_error_filesize;let u=+a.group_category.has_avatar,f,h,g,w,v,y,_,m,j,x,b,k,D,M,E,A,O,z,$,F,P,W=!1;function T(e,t){var o;e?("loading"===e?(_.hide(),O.hide(),A.show(),z.hide(),F.show()):(_.show(),O.hide(),A.show(),o="?nocache-"+(new Date).getTime(),u=!0,f=e,$.attr("src",f+o),F.hide(),z.show(),t&&(h=t,z.attr("src",h+o),window.ps_crop.destroy(z))),j.show(),x.hide(),b.hide(),k.show(),D.show()):(_.hide(),A.hide(),O.show(),u=!1,f=n,h=null,$.attr("src",f),z.removeAttr("src"),window.ps_crop.destroy(z))}function Q(e){e.preventDefault(),y[0].value=null,y.trigger("click")}function q(e){e.preventDefault();e={category_id:i,_wpnonce:d};o.ajax.post("groupcategoryajax.avatar_delete",e).then(e=>{e.success&&(W=!1,T(null),window.ps_crop.destroy(z),g.hide(),m.attr("disabled","disable"),o.hooks.doAction("group_category_avatar_updated",i,n))})}function I(e){e.preventDefault(),t||(W?(e={category_id:i,_wpnonce:d},t=!0,o.ajax.post("groupcategoryajax.avatar_confirm",e).then(e=>{var t;e.success&&(e=e.data&&e.data.image_url,t=e,fetch(t,{cache:"reload",mode:"no-cors"}).then(()=>document.body.querySelectorAll(`img[src='${t}']`).forEach(function(e){e.src=t})),window.ps_crop.destroy(z),g.hide(),W=!1,m.attr("disabled","disabled"),o.hooks.doAction("group_category_avatar_updated",i,e))}).always(function(){t=!1})):(window.ps_crop.destroy(z),g.hide()))}function L(e){e.preventDefault(),window.ps_crop.init({elem:z,change:e=>{P=function(e,t){let o=(0,s.default)(e),a=1,r=!1,i,n,d;e.naturalWidth&&(i=e.naturalWidth||o.width(),n=e.naturalHeight||o.height(),(800<i||800<n)&&(a=800/Math.max(i,n),i*=a,n*=a,r=!0),a=i/o.width());d={x1:Math.floor(a*t.x),y1:Math.floor(a*t.y),x2:Math.floor(a*(t.x+t.width)),y2:Math.floor(a*(t.y+t.height))},r&&(d.width=i,d.height=n);return d}(z[0],e)}}),j.hide(),x.show(),b.show(),k.hide(),D.hide()}function N(e){e.preventDefault(),window.ps_crop.detach(z),j.show(),x.hide(),b.hide(),k.show(),D.show()}function X(e){e.preventDefault(),window.ps_crop.detach(z),j.show(),x.hide(),b.hide(),k.show(),D.show();e={x:P.x1,y:P.y1,x2:P.x2,y2:P.y2,width:P.width,height:P.height},W&&(e.tmp=1),e=s.default.extend(e,{u:i,_wpnonce:d});o.ajax.post("groupcategoryajax.avatar_crop",e).then(e=>{e.success&&(T(e.data.image_url),W=!0,m.removeAttr("disabled"))})}function C(e){e.preventDefault();e=s.default.extend({direction:"ccw"===e.data.dir?"ccw":"cw"},{u:i,_wpnonce:d},{tmp:W?1:0});T("loading"),o.ajax.post("groupcategoryajax.avatar_rotate",e).then(e=>{e.success&&(T(e.data&&e.data.image_url,e.data&&e.data.orig_image_url),W=!0,m.removeAttr("disabled"))})}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(d,e,t){!function(a){!function(){"use strict";var t=o("undefined"!=typeof window?window.jQuery:void 0!==a?a.jQuery:null),r="undefined"!=typeof window?window.peepso:void 0!==a?a.peepso:null,e="undefined"!=typeof window?window.peepsodata:void 0!==a?a.peepsodata:null,i=o(d("./avatar-dialog"));function o(e){return e&&e.__esModule?e:{default:e}}const n=+e.group_category.id;(0,t.default)(function(){var e=(0,t.default)(".ps-js-focus--group-category .ps-js-avatar");if(e.length){let o=e.find(".ps-js-avatar-image"),a=e.find(".ps-js-avatar-button-wrapper");r.hooks.addAction("group_category_avatar_updated","page_group_category",(e,t)=>{+e==n&&o.attr("src",t),t.match(/\/group-categories\/\d+\//)?(a.css("cursor",""),a.attr("onclick",`peepso.simple_lightbox('${t.replace("-full.","-orig.")}'); return false`)):(a.css("cursor","default"),a.removeAttr("onclick"))}),e.find(".ps-js-avatar-button").on("click",e=>{e.preventDefault(),e.stopPropagation(),(0,i.default)().show()})}})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./avatar-dialog":1}],3:[function(e,t,o){!function(t){!function(){"use strict";var e,h=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},g="undefined"!=typeof window?window._:void 0!==t?t._:null,w="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=n(t);if(t&&t.has(e))return t.get(e);var o,a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in e){var i;"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&((i=r?Object.getOwnPropertyDescriptor(e,o):null)&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o])}a.default=e,t&&t.set(e,a);return a}("undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null);function n(e){var t,o;return"function"!=typeof WeakMap?null:(t=new WeakMap,o=new WeakMap,(n=function(e){return e?o:t})(e))}const y=window.Hammer,_=+v.default.upload_size,m=+v.group_category.id,j=v.group_category.img_cover_default,x=v.group_category.cover_nonce,b=v.default.ajaxurl_legacy+"groupcategoryajax.cover_upload?cover",k=v.group_category.text_error_filetype,D=v.group_category.text_error_filesize;let M=+v.group_category.has_cover,A;(0,h.default)(function(){let t=(0,h.default)(".ps-js-focus--group-category .ps-js-cover");if(!t.length)return;(0,h.default)(".ps-js-cover-upload").on("click",function(e){e.preventDefault(),o[0].value=null,o.trigger("click")});let o=function(){var e=(0,h.default)('<input type="file" name="filedata" accept="image/*" data-name="group-category-cover-upload" />').css({position:"absolute",opacity:0,height:1,width:1});e.appendTo(document.body),e.psFileupload&&e.psFileupload({formData:{category_id:m,_wpnonce:x},dataType:"json",url:b,replaceFileInput:!1,dropZone:null,add(e,t){var o=t.files[0];o.type.match(/image\/(jpe?g|png|webp)$/i)?o.size>_?alert(D):(c.css("opacity",.5),l.show(),t.submit()):alert(k)},done(e,t){var o,t=t.result;l.hide(),t.success?(o=t.data.image_url,r.show(),n.show(),d.show(),a.show(),M=!0,c.attr("style","").attr("src",o).one("load",p),w.hooks.doAction("group_cover_updated",m,o)):t.errors&&alert(t.errors)}});return e}(),a=(0,h.default)(".ps-js-cover-remove").on("click",function(e){e.preventDefault();let t=(0,w.dialog)(v.group_category.template_cover_remove).show();t.$el.on("click",".ps-js-cancel",()=>t.hide()),t.$el.on("click",".ps-js-submit",()=>{t.hide(),c.css("opacity",.5);var e={category_id:m,_wpnonce:x};w.ajax.post("groupcategoryajax.cover_delete",e).then(e=>{e.success&&(r.hide(),n.hide(),d.hide(),a.hide(),M=!1,c.attr("style","").attr("src",j).one("load",p),w.hooks.doAction("group_cover_updated",m,j))})})}),r=(0,h.default)(".ps-js-cover-reposition").on("click",function(e){e.preventDefault(),c.data("style",c.attr("style")),c.css("z-index",1),t.addClass("ps-focus-cover-edit"),i.show();let a=s.width()-c.width(),r=s.height()-c.height();c.off("mousedown").on("mousedown",function(e){e.preventDefault()}),void 0!==y&&((A=new y.Manager(c[0])).add(new y.Pan({direction:y.DIRECTION_ALL,treshhold:0})),A.on("pan panstart panend",e=>{e.srcEvent.stopPropagation(),e.srcEvent.preventDefault();var t,o=(0,h.default)(e.target);"panstart"===e.type?(o.data("position",o.position()),o.css("cursor","move")):"pan"===e.type?(t=o.data("position"),(e={top:e.deltaY,left:e.deltaX}).left=Math.max(e.left,a-t.left),e.left=Math.min(e.left,0-t.left),e.top=Math.max(e.top,r-t.top),e.top=Math.min(e.top,0-t.top),o.css("transform",`translate3d(${e.left}px, ${e.top}px, 0)`)):(e=100*(t=o.position()).left/s.width(),t=100*t.top/s.height(),e=Math.ceil(1e4*e)/1e4,t=Math.ceil(1e4*t)/1e4,o.css({top:t+"%",left:e+"%",transform:""}),o.removeData("position"),o.data({reposX:e,reposY:t}),o.css("cursor",""))}))}),i=(0,h.default)(".ps-js-cover-reposition-actions").hide(),n=((0,h.default)(".ps-js-cover-reposition-cancel").on("click",function(e){e.preventDefault(),A.destroy(),A=null,t.removeClass("ps-focus-cover-edit"),i.hide(),c.css("z-index",""),c.attr("style",c.data("style")).removeData("style")}),(0,h.default)(".ps-js-cover-reposition-confirm").on("click",function(e){e.preventDefault(),A.destroy(),A=null,t.removeClass("ps-focus-cover-edit"),i.hide(),c.css("z-index","");e={category_id:m,_wpnonce:x,y:c.data("reposX"),x:c.data("reposY")};w.ajax.post("groupcategoryajax.cover_reposition",e)}),(0,h.default)(".ps-js-cover-rotate-left").on("click",{dir:"ccw"},e)),d=(0,h.default)(".ps-js-cover-rotate-right").on("click",{dir:"cw"},e),s=t.find(".ps-js-cover-wrapper"),c=t.find(".ps-js-cover-image"),l=t.find(".ps-js-cover-loading");function e(e){e.preventDefault();e=h.default.extend({direction:"ccw"===e.data.dir?"ccw":"cw"},{category_id:m,_wpnonce:x});w.ajax.post("groupcategoryajax.cover_rotate",e).then(e=>{e.success&&(e=e.data.image_url,c.attr("style","").attr("src",e).one("load",p),w.hooks.doAction("group_cover_updated",m,e))})}M||(r.hide(),n.hide(),d.hide(),a.hide());let p=()=>{c.css({height:"auto",width:"100%",minWidth:"100%",maxWidth:"100%"});let e=s.height(),t=s.width(),o=c.height(),a=c.width();o<e&&(c.css({height:"100%",width:"auto",minWidth:"100%",maxWidth:"none"}),o=c.height(),a=c.width());var r=parseFloat(c[0].style.top)||0,r=(o>=e&&r<(r=(o-e)/e*-100)&&c.css("top",r+"%"),parseFloat(c[0].style.left)||0);a>=t&&r<(r=(a-t)/t*-100)&&c.css("left",r+"%"),c.css("opacity","")};p=(0,g.throttle)(p,500),c.each(function(){var e=new Image;e.onload=p,e.src=this.src});let u,f=(w.hooks.addAction("browser_resize","group_cover",e=>{u&&u===e.width||(u=e.width,p())}),(0,h.default)(".ps-js-cover-button-popup"));f.on("click",function(e){e.currentTarget===e.target&&(e=(0,h.default)(this).data("cover-url"))&&peepso.simple_lightbox(e)}),w.hooks.addAction("group_cover_updated","page_group_category",(e,t)=>{+e==m&&(-1<t.indexOf(`/group-categories/${e}/`)?(f.css("cursor","pointer"),f.data("cover-url",t)):(f.css("cursor",""),f.removeData("cover-url")))})})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,o){"use strict";e("./avatar"),e("./cover")},{"./avatar":2,"./cover":3}],5:[function(e,t,o){"use strict";e("./header")},{"./header":4}]},{},[5]);